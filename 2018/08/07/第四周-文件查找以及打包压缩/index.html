<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>文件查找以及打包压缩 | Souler ACan’s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="DAY 10文件查找查找文件的方法有两种：   非实时查找--locate命令   实时查找--find命令(常用) locate命令 原理：通过索引数据库完成文件查找     /var/lib/mlocate/mlocate.db（二进制文件） 更新数据库：     updatedb 特点：     查找速度快     模糊查找     非实时查找     搜索的文件是全路径，不仅仅是文件名">
<meta property="og:type" content="article">
<meta property="og:title" content="文件查找以及打包压缩">
<meta property="og:url" content="http://yoursite.com/2018/08/07/第四周-文件查找以及打包压缩/index.html">
<meta property="og:site_name" content="Souler ACan’s blog">
<meta property="og:description" content="DAY 10文件查找查找文件的方法有两种：   非实时查找--locate命令   实时查找--find命令(常用) locate命令 原理：通过索引数据库完成文件查找     /var/lib/mlocate/mlocate.db（二进制文件） 更新数据库：     updatedb 特点：     查找速度快     模糊查找     非实时查找     搜索的文件是全路径，不仅仅是文件名">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2018-08-12T12:05:19.001Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="文件查找以及打包压缩">
<meta name="twitter:description" content="DAY 10文件查找查找文件的方法有两种：   非实时查找--locate命令   实时查找--find命令(常用) locate命令 原理：通过索引数据库完成文件查找     /var/lib/mlocate/mlocate.db（二进制文件） 更新数据库：     updatedb 特点：     查找速度快     模糊查找     非实时查找     搜索的文件是全路径，不仅仅是文件名">
  
    <link rel="alternate" href="/atom.xml" title="Souler ACan’s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Souler ACan’s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">who am i ？</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-第四周-文件查找以及打包压缩" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/07/第四周-文件查找以及打包压缩/" class="article-date">
  <time datetime="2018-08-07T12:00:00.000Z" itemprop="datePublished">2018-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      文件查找以及打包压缩
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="DAY-10"><a href="#DAY-10" class="headerlink" title="DAY 10"></a>DAY 10</h1><h2 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h2><p>查找文件的方法有两种：  </p>
<pre><code>非实时查找--locate命令  
实时查找--find命令(常用)
</code></pre><p><strong>locate命令</strong></p>
<pre><code>原理：通过索引数据库完成文件查找
    /var/lib/mlocate/mlocate.db（二进制文件）
更新数据库：
    updatedb
特点：
    查找速度快
    模糊查找
    非实时查找
    搜索的文件是全路径，不仅仅是文件名
    只能搜索用户具备读取和执行权限的目录

用法：locate &lt;文件名&gt;
选项：
    -i 不区分大小写搜索
    -n # 只列举#个
    -r 使用正则表达式

eg：搜索名称或路径中带有&quot;conf&quot;的文件
        locate conf
    使用REGEX(正则表达式)来搜索&quot;.conf&quot;结尾的文件
        locate -r &apos;\.conf$&apos;
</code></pre><p><strong>find命令</strong></p>
<pre><code>原理：通过遍历指定路径完成文件查找  

工作特点：  
    查找速度略慢
    精确查找
    实时查找
    只能搜索用户具备读取和执行权限的目录

用法：
    find [选项].. [查找路径] [查找条件] [处理动作]
    该命令默认是递归搜索

    查找路径：指定具体目标路径，默认当前目录

    查找条件：指定的查找标准，可以是文件名、大小、类型、权限等标准进行；默认找出指定路径下的所有文件

    处理动作：对符合条件的文件做操作，默认输出至屏幕

查找条件：

    搜索层级：
        -maxdepth n 搜索指定最大层级，n表示层数
        -mindepth n 搜索指定最小层级，n表示层数

    根据文件名和inode查找：
        -regex          使用正则搜索文件  
        -name           精确查找，支持通配符
        -i              忽略大小写
        -inum n         按节点编号查找文件，n表示节点编号
        -samefilename   查找相同的文件，节点编号相同的文件
        -links n        搜索软链接数为n的文件

    根据属主属组查找：
        -user &lt;用户名&gt;   查找指定用户名属主的文件 
        -group &lt;组&gt;      查找指定组名属组的文件
        -uid &lt;id&gt;       查找指定uid号属主的文件
        -gid &lt;id&gt;       查找指定gid号属组的文件
        -nogroup        查找没有属组的文件 
        -nouser         查找没有属主的文件

    根据文件类型查找：
        -type f 查找普通文件
        -type d 查找目录文件
        -type l 查找符号链接文件
        -type s 查找套接字文件
        -type b 查找块设备文件
        -type c 查找字符设备文件
        -type p 查找管道文件
        空文件或目录
            find -empty 
        查找空文件
            find -type f -empty

    根据文件大小查找
        -size &lt;文件大小&gt; 
            eg：-size -6M  (0M,5M]
                -size  6M  (5M,6M]
                -size +6M  (6M,∞)

    根据时间戳查找
        以天为单位：
            -atime ±#
            eg：-atime -# [0,#)  
                -atime  # (#,#+1)  
                -atime +# [#+1,∞]
            -mtime
            -ctime
        以分钟为单位：
            -amin ±#
            -mmin ±#
            -cmin ±#

    根据权限查找
        -perm[/|-]MODE
            MODE:精确权限匹配
            /MODE:任何一类(u,g,o)对象的权限中只要能一位匹配即可
            -MODE 每一类对象都必须同时拥有指定权限,至少            
                -644
                110 100 100 ，1检查位，0不检查
                find /data -perm -222 -ls
        find -perm 755 会匹配权限模式恰好是755的文件
        只要当任意人有写权限是，find -perm +222就会匹配
        只有当每个人都有写权限是，find -perm -222才会匹配
        只有当其他人(other)有写权限是，find -perm -002才会匹配

    组合条件：
        与:-a
        或:-o
        非：-not,!
    德摩根定律：
        (非A)或(非B)=非(A且B)
        (非A)且(非B)=非(A或B)

处理动作：
    -print 默认的处理动作，显示至屏幕
    -ls  类似于对查找到的文件执&quot;ls -l&quot; 显示详细信息
    -delete 删除查找到的文件
    -fls 用于长信息重定向到文件中
    -ok command {} \;   对查找到的每个文件执行由command指定的命令，对于每个文件执行命令之前，都会交互式要求用户确认 {}表示搜索到的文件
    -exec command {}\； 对查找的每个文件执行由command指定的命令，
</code></pre><p><strong>Gnome搜索工具</strong> </p>
<pre><code>位置-&gt;搜索文件...
图形化搜索工具，可搜索
    命令
    内容
    用户/组群
    大小
    修改时间
</code></pre><p><strong>xargs</strong> 传命令参数  </p>
<pre><code>touch {1..1000000}.txt  此命令参数过大无法创建文件  但是可以通过管道使用xargs将参数传给touch来实现          
eg：
    echo {1..1000000}.txt|xargs touch
</code></pre><hr>
<h2 id="压缩与打包"><a href="#压缩与打包" class="headerlink" title="压缩与打包"></a>压缩与打包</h2><p><strong>压缩与解压工具：</strong> compress、gzip、bzip2、xz</p>
<pre><code>compress: 压缩包格式file.Z
    用法：compress 
    选项：
        compress -d &lt;file.Z&gt;   解压缩，不保留源文件
        uncompress &lt;file.Z&gt;    等同-d解压缩
        compress -c &lt;file.Z&gt;   结果输出至标准输出，不删除源文件
        compress -c &apos;file&apos; &gt; &apos;file.Z&apos;  保留源文件，并生成压缩包
        zcat &apos;file.Z&apos; &gt; &apos;file&apos;  重定向解压缩

gzip/gunzip: 压缩包格式file.gz
    用法：gzip [option].. file..
    选项：
        gzip -d &lt;file.gz&gt;  解压缩，不保留源文件
        gunzip &lt;file.gz&gt;  等同-d解压
        gzip -c &lt;file.gz&gt; 结果输出至标准输出，不删除源文件
        -#：1-9，指定压缩比，值越大压缩比越大
        zcat &apos;file.gz&apos; &gt; &apos;file&apos;   重定向解压缩
    eg：(待添加)

bzip2: 压缩包格式file.bz2
    用法：bzip2 [option].. file..
    选项：
        bzip2 -k &lt;file&gt;   压缩文件，并保留源文件
        bzip2 -d &lt;file.bz2&gt; 解压缩，不保留源文件
        bunzip2 &lt;file.bz2&gt; 等同于-d解压缩
        -#：1-9，指定压缩比，值越大压缩比越大
        bzcat  &apos;file.bz2&apos;  &gt;  &apos;file&apos;   重定向解压缩
    eg：(待添加)

xz: 压缩包格式file.gz
    用法：xz [option].. file..
    选项：
        xz -k &lt;file&gt; 压缩文件，并保留源文件
        xz -d &lt;file.xz&gt; 解压缩,不保留源文件
        -#：1-9，指定压缩比，值越大压缩比越大
        unxz &lt;file.xz&gt;  等同于-d解压缩
        xzcat file.xz &gt; file 重定向解压缩，以及查看内容
    eg：(待添加)

注意：压缩工具中压缩比越高，越损耗cpu性能
</code></pre><p><strong>打包工具：</strong> zip与tar</p>
<pre><code>zip：压缩包格式file.zip  (个人认为不常用，稍作了解即可)
    用法：zip [option] file.zip file..将多个文件或者文件夹打包压缩，压缩比不高
    选项：
        zip -r file.zip file1 file2  递归处理将指定目录下的所有文件和子目录一并打包，且将绝对路径改为相对路径
        unzip file.zip 解压缩文件
        unzip -t file.zip 检查压缩包的完整性
        unzip -v file.zip 只查看压缩包内容，不解压缩
        unzip -j file.zip 将所有子目录中的文件全部解压到第一级目录



tar：linux最常用的打包程序，通常以.tar结尾 （tape archive 磁带归档）

    用法：tar [option].. file..  
        注意：tar本身不具有压缩功能，他是调用压缩功能实现的
    选项：
        -c 建立新的压缩文件
        -x 从压缩文件中提取文件
        -v 显示解压过程
        -f 指定压缩文件
        -Z 支持compress解压文件
        -j 支持bzip2解压文件
        -z 支持gz解压文件
        -t 显示压缩文件的内容
        -W 确认压缩文件的正确性
        -A 新增压缩文件到已存在的压缩
    常用组合
        tar cvf 文件.tar 文件
        -p  显示打包过程
        -cvf  打包
        -tvf  预览解包
        -xvf  解包
        jcvf  打包成.tar.bz2
        jxvf  将.tar.bz2解包
        zcvf  打包成.tar.gz
        zxvf  将.tar.gz解包
        Zcvf  打包成.tar.Z
        Zxvf  将.tar.Z解包
        Jcvf  打包成.tar.xz
        Jxvf  将.tar.xz解包

    -X 指定不打包的文件列表,选项后跟文件
        -X file
    -T 指定要打包的文件列表，选项后跟文件
        -T file
</code></pre><p><strong>切割文件的工具：</strong></p>
<pre><code>splist命令：将一个大文件分割成很多个小文件，提高可读性，生成日志等
    用法：split [option] [size] file
    选项：
        -b size  
        -d  切割后的文件使用数字后缀命名 
        -a n  指定后缀的长度为n
        -l n  根据文件的行数来分割文件，每个小文件n行
        合并文件            
        cat 被切割过的所有文件 &gt; 合并后的文件名
</code></pre><p><strong>重定向打包工具：</strong></p>
<pre><code>cpio命令

    通过重定向的方式将文件进行打包备份，还原恢复的工具，他可以解压以&apos;.cpio&apos;或&apos;.tar&apos;结尾的文件
    功能：从归档中复制文件，或者复制文件到归档中
    用法：
        cpio [option] &gt; 文件名或者设备名
        cpio [option] &lt; 文件名或者设备名
    选项：
        -o 将文件拷贝打包成文件或者将文件输出到设备上
        -i 解包，将打包文件解压或将设备上的备份还原到系统
        -t 预览，查看文件内容或者输出到设备上的文件内容
        -v 显示打包过程中的文件名称
        -d 解包生成目录，在cpio还原时，自动建立的目录
        -c 一种较新的存储方式
    eg：将/etc目录备份：
        find  ./etc print|cpio -ov &gt;etc.cpio
    eg: 内容预览
        cpio -tv &lt; etc.cpio
    eg: 解包文件
        cpio -idv &lt; etc.cpio
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/07/第四周-文件查找以及打包压缩/" data-id="cjkqzikpv0004ugiscrplctck" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/08/09/第四周-rmp命令、yum命令、编译安装实例/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          rmp命令、yum命令、编译安装实例
        
      </div>
    </a>
  
  
    <a href="/2018/08/05/第三周-shell脚本编程基础知识/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">shell脚本编程基础知识</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/12/第四周-磁盘相关知识以及分区管理和挂载/">磁盘相关知识以及分区管理和挂载</a>
          </li>
        
          <li>
            <a href="/2018/08/09/第四周-rmp命令、yum命令、编译安装实例/">rmp命令、yum命令、编译安装实例</a>
          </li>
        
          <li>
            <a href="/2018/08/07/第四周-文件查找以及打包压缩/">文件查找以及打包压缩</a>
          </li>
        
          <li>
            <a href="/2018/08/05/第三周-shell脚本编程基础知识/">shell脚本编程基础知识</a>
          </li>
        
          <li>
            <a href="/2018/08/01/第三周-文本处理工具和正则表达式/">文本处理工具和正则表达式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 ACan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>